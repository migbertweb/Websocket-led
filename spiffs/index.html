<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control LED ESP32</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üéõÔ∏è Control ESP32</h1>
        
        <div class="status-panel">
            <div class="status-item">
                <span class="label">Conexi√≥n:</span>
                <span id="connectionStatus" class="status disconnected">Desconectado</span>
            </div>
            <div class="status-item">
                <span class="label">LED GPIO2:</span>
                <span id="ledStatus" class="status off">APAGADO</span>
            </div>
        </div>

        <div class="control-panel">
            <button id="btnOn" class="btn btn-on" onclick="sendCommand('ON')">
                üî• ENCENDER
            </button>
            <button id="btnOff" class="btn btn-off" onclick="sendCommand('OFF')">
                üí§ APAGAR
            </button>
            <button id="btnToggle" class="btn btn-toggle" onclick="sendCommand('TOGGLE')">
                üîÑ TOGGLE
            </button>
        </div>

        <!-- NUEVA SECCI√ìN: Sensor DHT11 -->
        <div class="sensor-panel">
            <h2>üå°Ô∏è Sensor DHT11</h2>
            <div class="sensor-data">
                <div class="sensor-item">
                    <span class="sensor-label">Temperatura:</span>
                    <span id="temperatureValue" class="sensor-value">--.- ¬∞C</span>
                </div>
                <div class="sensor-item">
                    <span class="sensor-label">Humedad:</span>
                    <span id="humidityValue" class="sensor-value">--.- %</span>
                </div>
                <div class="sensor-item">
                    <span class="sensor-label">√öltima actualizaci√≥n:</span>
                    <span id="lastUpdate" class="sensor-value">--:--:--</span>
                </div>
            </div>
            <div class="sensor-controls">
                <button id="btnRefreshDHT" class="btn btn-sensor" onclick="requestDHTData()">
                    üîÑ Actualizar
                </button>
                <button id="btnAutoRefresh" class="btn btn-sensor" onclick="toggleAutoRefresh()">
                    ‚è∞ Auto: OFF
                </button>
            </div>
        </div>

        <div class="info">
            <p>Conectado al ESP32 v√≠a WebSocket - GPIO2 | DHT11 en GPIO4</p>
        </div>
    </div>

    <script src="websocket.js"></script>
    
    <script>
        // Funci√≥n global para los botones
        function sendCommand(cmd) {
            console.log('üîÑ Bot√≥n presionado, enviando comando:', cmd);
            if (window.wsController) {
                window.wsController.sendCommand(cmd);
            } else {
                console.error('‚ùå Controlador WebSocket no disponible');
                alert('WebSocket no conectado. Recarga la p√°gina.');
            }
        }
        
        // Verificar que los botones est√©n funcionando
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ P√°gina cargada correctamente');
        });
    </script>
</body>
</html>